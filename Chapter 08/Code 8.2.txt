global class YT_Video_Details_onRecord {
public static string commentCount;
public static string likeCount;
public static string dislikeCount;
public static string viewCount;

webService static void fetchStats(String recordid){
        string b =Youtube_Custom_Setting__c.getInstance('YouTube Endpoint').Value__c;    
        HttpRequest req= new HttpRequest(); 
        Http con123 = new Http();    
        req.setMethod('GET');
        req.setEndpoint(b);
        string gggg ='ya29.GlsuBvCQNsEjAXZF2OwW0Xx6-zxfsyZbtsXuHOo7408dWnsQDumeumkAWz_EtH5sZZ1SPiZFRKad_YUuG-phMKDN4plDr3UklZQ-7hTtjZyhulkRAIzhdUBlMbd5';
        String authorizationHeader = 'Bearer' + ' ' + string.valueof(gggg);
        req.setHeader('Authorization', authorizationHeader);

        HttpResponse hs1 = con123.send(req);
        string resp = hs1.getbody();
        system.debug('resp--------------- '+resp);

/**                                             parsing                                 **/

      JSONParser parser = JSON.createParser(resp);

while (parser.nextToken() != null) {
if ((parser.getCurrentToken() == JSONToken.FIELD_NAME) &&
                (parser.getText() == 'commentCount')) {
// Get the value.
                parser.nextToken();

                commentCount = parser.getText();

                system.debug('commentCount= ' + commentCount);
            }
if ((parser.getCurrentToken() == JSONToken.FIELD_NAME) &&
                (parser.getText() == 'likeCount')) {
// Get the value.
                parser.nextToken();

                likeCount = parser.getText();

                system.debug('likeCount= ' + likeCount);
            }
if ((parser.getCurrentToken() == JSONToken.FIELD_NAME) &&
                (parser.getText() == 'dislikeCount')) {
// Get the value.
                parser.nextToken();

                dislikeCount = parser.getText();

                system.debug('dislikeCount= ' + dislikeCount);
            }
if ((parser.getCurrentToken() == JSONToken.FIELD_NAME) &&
                (parser.getText() == 'viewCount')) {
// Get the value.
                parser.nextToken();

                viewCount = parser.getText();

                system.debug('viewCount= ' + viewCount);
            }
        }

//update the existing record with the facebook profile info as follows
     YouTube_info__c YT = new YouTube_info__c();
     YT.Views__c = viewCount;
     YT.Likes__c = likeCount;
     YT.Dislikes__c = dislikeCount;
     YT.Comments__c = commentCount;
     YT.id = recordid;
     update YT;

    }


}